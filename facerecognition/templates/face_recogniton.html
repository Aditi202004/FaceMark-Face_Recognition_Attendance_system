<!DOCTYPE html>
<html lang="en">
  <style type="text/css">
    * {
      padding: 0;
      margin: 0;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-image: url("https://cutewallpaper.org/21/1920-x-1080-gif/1920x1080-Wallpapercartoon-Wallpapers-Driverlayer-Search-.gif");
      background-size: cover;
      font-family: sans-serif;
      margin-top: 40px;
      height: 100vh;
      padding: 0;
      margin: 0;
      overflow: hidden;
    }

    table {
      border: 1px;
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 86%;
      margin: auto;
    }

    td,
    th {
      border: 1px solid black !important;
      padding: 5px;
    }

    tr:nth-child(even) {
      background-color: #dddddd;
    }
    .drop-zone {
      width: 280px;
      height: 200px;
      padding: 25px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-family: "Quicksand", sans-serif;
      font-weight: 500;
      font-size: 20px;
      cursor: pointer;
      color: white;
      border: 4px dashed white;
      border-radius: 10px;
      margin: 20px auto;
    }

    .drop-zone--over {
      border-style: solid;
    }

    .drop-zone__input {
      display: none;
    }

    .drop-zone__thumb {
      width: 100%;
      height: 100%;
      border-radius: 10px;
      overflow: hidden;
      background-color: #cccccc;
      background-size: cover;
      position: relative;
    }

    .drop-zone__thumb::after {
      content: attr(data-label);
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 5px 0;
      color: #ffffff;
      background: rgba(0, 0, 0, 0.75);
      font-size: 14px;
      text-align: center;
    }
  </style>

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />

    <title>FaceMark: Automated Attendance Tracker</title>
  </head>

  <body>
    <div class="mt-3 text-center">
      <h1
        style="
          width: auto;
          margin: auto;
          color: white;
          padding: 30px;
          font-size: 44px;
        "
      >
        FaceMark: Automated Attendance Tracker
      </h1>
    </div>

    <p class="text-center" id="date-time" style="color: white; font-size: 20px">
      Date | Time
    </p>

    <div
      class="row text-center"
      style="
        padding: 20px;
        margin: 20px;
        display: flex;
        justify-content: space-between;
      "
    >
      <div
        class="col"
        style="
          border-radius: 20px;
          padding: 0px;
          background-color: rgb(211, 211, 211, 0.5);
          margin: 0px 10px 10px 10px;
          height: 400px;
        "
      >
        <h2
          style="
            border-radius: 20px 20px 0px 0px;
            background-color: #0b4c61;
            color: white;
            padding: 10px;
          "
        >
          Photo-Based Attendance
        </h2>
        <div class="drop-zone">
          <span class="drop-zone__prompt"
            >Drop file here or click to upload</span
          >
          <input type="file" name="myFile" class="drop-zone__input" />
        </div>
      </div>
      <div
        class="col"
        style="
          border-radius: 20px;
          padding: 0px;
          background-color: rgb(211, 211, 211, 0.5);
          margin: 0px 10px 10px 10px;
          min-height: 400px;
        "
      >
        <h2
          style="
            border-radius: 20px 20px 0px 0px;
            background-color: #0b4c61;
            color: white;
            padding: 10px;
          "
        >
          Record Live Attendance
        </h2>
        <a style="text-decoration: none; max-width: 300px" href="/start">
          <button
            style="
              font-size: 24px;
              font-weight: bold;
              border-radius: 10px;
              width: 490px;
              padding: 10px;
              margin-top: 30px;
              margin-bottom: 30px;
            "
            type="submit"
            class="btn btn-primary"
          >
            Take Attendance
          </button>
        </a>
        <table style="background-color: white">
          <tr>
            <td><b>S No</b></td>
            <td><b>Name</b></td>
            <td><b>ID</b></td>
            <td><b>Time</b></td>
          </tr>
        </table>
      </div>
      <div
        class="col"
        style="
          border-radius: 20px;
          padding: 0px;
          background-color: rgb(211, 211, 211, 0.5);
          margin: 0px 10px 10px 10px;
          height: 400px;
        "
      >
        <form action="/add" method="POST" enctype="multipart/form-data">
          <h2
            style="
              border-radius: 20px 20px 0px 0px;
              background-color: #0b4c61;
              color: white;
              padding: 10px;
            "
          >
            Add New Student
          </h2>
          <label style="font-size: 20px"><b>Enter Student Name</b></label>
          <br />
          <input
            type="text"
            id="newusername"
            name="newusername"
            style="font-size: 20px; margin-top: 15px; margin-bottom: 15px"
            required
          />
          <br />
          <label style="font-size: 20px"
            ><b>Enter Student Roll Number</b></label
          >
          <br />
          <input
            type="number"
            id="newusereid"
            name="newuserid"
            style="font-size: 20px; margin-top: 15px; margin-bottom: 15px"
            required
          />
          <br />
          <button
            style="width: 232cpx; margin-top: 25px; font-size: 20px"
            type="submit"
            class="btn btn-dark"
            id="myButton"
          >
            Add New Student
          </button>
          <br />
        </form>
      </div>
    </div>
    <script>
      function updateDateTime() {
        const dateTimeElement = document.getElementById("date-time");
        const now = new Date();
        const dateTimeString = now.toLocaleString(); // Format the date and time as a string
        dateTimeElement.textContent = "Date and Time: " + dateTimeString;
      }
      const myButton = document.getElementById("myButton");
      myButton.onclick = function () {
        alert("New student successfully added!");
      };

      // Update the date and time when the page loads and then every second
      updateDateTime();
      setInterval(updateDateTime, 1000);
      document.querySelectorAll(".drop-zone__input").forEach((inputElement) => {
        const dropZoneElement = inputElement.closest(".drop-zone");

        dropZoneElement.addEventListener("click", (e) => {
          inputElement.click();
        });

        inputElement.addEventListener("change", (e) => {
          if (inputElement.files.length) {
            updateThumbnail(dropZoneElement, inputElement.files[0]);
          }
        });

        dropZoneElement.addEventListener("dragover", (e) => {
          e.preventDefault();
          dropZoneElement.classList.add("drop-zone--over");
        });

        ["dragleave", "dragend"].forEach((type) => {
          dropZoneElement.addEventListener(type, (e) => {
            dropZoneElement.classList.remove("drop-zone--over");
          });
        });

        dropZoneElement.addEventListener("drop", (e) => {
          e.preventDefault();

          if (e.dataTransfer.files.length) {
            inputElement.files = e.dataTransfer.files;
            updateThumbnail(dropZoneElement, e.dataTransfer.files[0]);
          }

          dropZoneElement.classList.remove("drop-zone--over");
        });
      });

      /**
       * Updates the thumbnail on a drop zone element.
       *
       * @param {HTMLElement} dropZoneElement
       * @param {File} file
       */
      function updateThumbnail(dropZoneElement, file) {
        let thumbnailElement =
          dropZoneElement.querySelector(".drop-zone__thumb");

        // First time - remove the prompt
        if (dropZoneElement.querySelector(".drop-zone__prompt")) {
          dropZoneElement.querySelector(".drop-zone__prompt").remove();
        }

        // First time - there is no thumbnail element, so lets create it
        if (!thumbnailElement) {
          thumbnailElement = document.createElement("div");
          thumbnailElement.classList.add("drop-zone__thumb");
          dropZoneElement.appendChild(thumbnailElement);
        }

        thumbnailElement.dataset.label = file.name;

        // Show thumbnail for image files
        if (file.type.startsWith("image/")) {
          const reader = new FileReader();

          reader.readAsDataURL(file);
          reader.onload = () => {
            thumbnailElement.style.backgroundImage = `url('${reader.result}')`;
          };
        } else {
          thumbnailElement.style.backgroundImage = null;
        }
      }
    </script>
  </body>
</html>
